2025-03-18 19:06:58,143 - rate_limiter - INFO - RateLimiter initialized with 5 calls per 60.00 seconds
2025-03-18 19:07:09,150 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:07:09,150 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:07:09,151 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:07:09,151 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:07:09,185 - connector - INFO - Connected to mysql database.
2025-03-18 19:07:09,268 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:07:09,268 - connector - INFO - Closed mysql database connection.
2025-03-18 19:07:09,268 - prompt_templates - INFO - Generating MySQL prompt for query: List revenue by terrirtory
2025-03-18 19:07:09,268 - query_cache - INFO - Cache get for key e16f3f5fa21b24d51a6098fc7c55eeed2f056dd9408d6f39af1569817b7022be: None
2025-03-18 19:07:09,268 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            List revenue by terrirtory

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:07:12,327 - ai_clients - INFO - Generated query: ```sql
SELECT 
    st.Name AS TerritoryName, 
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
``` (latency: 3.06s, usage: {
  "prompt_tokens": 6864,
  "completion_tokens": 85,
  "total_tokens": 6949,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:07:12,327 - query_optimizer - INFO - Optimized query: ```sql
SELECT 
    st.Name AS TerritoryName, 
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
```;
2025-03-18 19:07:12,328 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:07:12,328 - query_cache - INFO - Cache set for key e16f3f5fa21b24d51a6098fc7c55eeed2f056dd9408d6f39af1569817b7022be with query: ```sql
SELECT 
    st.Name AS TerritoryName, 
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
```;
2025-03-18 19:07:12,328 - database_query - INFO - Generated and optimized query: ```sql
SELECT 
    st.Name AS TerritoryName, 
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
```;
2025-03-18 19:07:12,338 - connector - INFO - Connected to mysql database.
2025-03-18 19:07:12,339 - database_query - INFO - Executing SQL query: SELECT 
    st.Name AS TerritoryName, 
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
2025-03-18 19:07:12,408 - connector - INFO - Closed mysql database connection.
2025-03-18 19:07:28,310 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:07:28,343 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:07:28,343 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:07:28,343 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:07:28,350 - connector - INFO - Connected to mysql database.
2025-03-18 19:07:28,435 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:07:28,436 - connector - INFO - Closed mysql database connection.
2025-03-18 19:07:28,436 - prompt_templates - INFO - Generating MySQL prompt for query: List the revenue accrosss the territories
2025-03-18 19:07:28,436 - query_cache - INFO - Cache get for key 0c62d47cd4a07ad0fd4bb4ecb916486c4397732e09952c20f0f5c0a91063b432: None
2025-03-18 19:07:28,436 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            List the revenue accrosss the territories

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:07:30,112 - ai_clients - INFO - Generated query: ```sql
SELECT 
    st.Name AS TerritoryName,
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
``` (latency: 1.68s, usage: {
  "prompt_tokens": 6866,
  "completion_tokens": 84,
  "total_tokens": 6950,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:07:30,113 - query_optimizer - INFO - Optimized query: ```sql
SELECT 
    st.Name AS TerritoryName,
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
```;
2025-03-18 19:07:30,113 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:07:30,113 - query_cache - INFO - Cache set for key 0c62d47cd4a07ad0fd4bb4ecb916486c4397732e09952c20f0f5c0a91063b432 with query: ```sql
SELECT 
    st.Name AS TerritoryName,
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
```;
2025-03-18 19:07:30,113 - database_query - INFO - Generated and optimized query: ```sql
SELECT 
    st.Name AS TerritoryName,
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
```;
2025-03-18 19:07:30,124 - connector - INFO - Connected to mysql database.
2025-03-18 19:07:30,124 - database_query - INFO - Executing SQL query: SELECT 
    st.Name AS TerritoryName,
    SUM(so.TotalDue) AS TotalRevenue
FROM 
    Sales_SalesOrderHeader AS so
INNER JOIN 
    Sales_SalesTerritory AS st ON so.TerritoryID = st.TerritoryID
WHERE 
    so.Status = 'Completed'
GROUP BY 
    st.Name
ORDER BY 
    TotalRevenue DESC;
2025-03-18 19:07:30,143 - connector - INFO - Closed mysql database connection.
2025-03-18 19:07:46,193 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:07:46,194 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:07:46,194 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:07:46,194 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:07:46,207 - connector - INFO - Connected to mysql database.
2025-03-18 19:07:46,291 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:07:46,291 - connector - INFO - Closed mysql database connection.
2025-03-18 19:07:46,291 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of feb
2025-03-18 19:07:46,291 - query_cache - INFO - Cache get for key 4b9d4c7a3c9bec634d6d5125990c36f6f040306f9361079555ad49b1567a286e: None
2025-03-18 19:07:46,291 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Count of employee birthdays in the month of feb

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:07:47,140 - ai_clients - INFO - Generated query: ```sql
SELECT COUNT(*) AS BirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
``` (latency: 0.85s, usage: {
  "prompt_tokens": 6867,
  "completion_tokens": 28,
  "total_tokens": 6895,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:07:47,140 - query_optimizer - INFO - Optimized query: ```sql
SELECT COUNT(*) AS BirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:07:47,140 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:07:47,140 - query_cache - INFO - Cache set for key 4b9d4c7a3c9bec634d6d5125990c36f6f040306f9361079555ad49b1567a286e with query: ```sql
SELECT COUNT(*) AS BirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:07:47,140 - database_query - INFO - Generated and optimized query: ```sql
SELECT COUNT(*) AS BirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:07:47,151 - connector - INFO - Connected to mysql database.
2025-03-18 19:07:47,151 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
2025-03-18 19:07:47,156 - connector - INFO - Closed mysql database connection.
2025-03-18 19:09:42,733 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:09:42,733 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:09:42,734 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:09:42,734 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:09:42,745 - connector - INFO - Connected to mysql database.
2025-03-18 19:09:42,871 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:09:42,872 - connector - INFO - Closed mysql database connection.
2025-03-18 19:09:42,872 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of feb
2025-03-18 19:09:42,872 - query_cache - INFO - Cache get for key 4b9d4c7a3c9bec634d6d5125990c36f6f040306f9361079555ad49b1567a286e: None
2025-03-18 19:09:42,872 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Count of employee birthdays in the month of feb

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:09:43,765 - ai_clients - INFO - Generated query: ```sql
SELECT COUNT(*) AS BirthdayCount 
FROM HumanResources_Employee 
WHERE MONTH(BirthDate) = 2;
``` (latency: 0.89s, usage: {
  "prompt_tokens": 6867,
  "completion_tokens": 28,
  "total_tokens": 6895,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:09:43,765 - query_optimizer - INFO - Optimized query: ```sql
SELECT COUNT(*) AS BirthdayCount 
FROM HumanResources_Employee 
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:09:43,765 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:09:43,766 - query_cache - INFO - Cache set for key 4b9d4c7a3c9bec634d6d5125990c36f6f040306f9361079555ad49b1567a286e with query: ```sql
SELECT COUNT(*) AS BirthdayCount 
FROM HumanResources_Employee 
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:09:43,766 - database_query - INFO - Generated and optimized query: ```sql
SELECT COUNT(*) AS BirthdayCount 
FROM HumanResources_Employee 
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:09:43,773 - connector - INFO - Connected to mysql database.
2025-03-18 19:09:43,773 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdayCount 
FROM HumanResources_Employee 
WHERE MONTH(BirthDate) = 2;
2025-03-18 19:09:43,775 - connector - INFO - Closed mysql database connection.
2025-03-18 19:12:09,213 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:12:09,214 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:12:09,214 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:12:09,214 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:12:09,228 - connector - INFO - Connected to mysql database.
2025-03-18 19:12:09,331 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:12:09,332 - connector - INFO - Closed mysql database connection.
2025-03-18 19:12:09,332 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of feb
2025-03-18 19:12:09,333 - query_cache - INFO - Cache get for key 4b9d4c7a3c9bec634d6d5125990c36f6f040306f9361079555ad49b1567a286e: None
2025-03-18 19:12:09,334 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Count of employee birthdays in the month of feb

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:12:10,929 - ai_clients - INFO - Generated query: ```sql
SELECT COUNT(*) AS EmployeeBirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
``` (latency: 1.59s, usage: {
  "prompt_tokens": 6867,
  "completion_tokens": 29,
  "total_tokens": 6896,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:12:10,930 - query_optimizer - INFO - Optimized query: ```sql
SELECT COUNT(*) AS EmployeeBirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:12:10,930 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:12:10,930 - query_cache - INFO - Cache set for key 4b9d4c7a3c9bec634d6d5125990c36f6f040306f9361079555ad49b1567a286e with query: ```sql
SELECT COUNT(*) AS EmployeeBirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:12:10,930 - database_query - INFO - Generated and optimized query: ```sql
SELECT COUNT(*) AS EmployeeBirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
```;
2025-03-18 19:12:10,938 - connector - INFO - Connected to mysql database.
2025-03-18 19:12:10,939 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS EmployeeBirthdayCount
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 2;
2025-03-18 19:12:10,941 - connector - INFO - Closed mysql database connection.
2025-03-18 19:16:47,821 - rate_limiter - INFO - RateLimiter initialized with 5 calls per 60.00 seconds
2025-03-18 19:16:58,348 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:16:58,349 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:16:58,349 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:16:58,349 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:16:58,437 - connector - INFO - Connected to mysql database.
2025-03-18 19:16:58,560 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:16:58,561 - connector - INFO - Closed mysql database connection.
2025-03-18 19:16:58,561 - prompt_templates - INFO - Generating MySQL prompt for query: Give me 5 products
2025-03-18 19:16:58,562 - query_cache - INFO - Cache get for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242: None
2025-03-18 19:16:58,562 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Give me 5 products

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:17:03,984 - ai_clients - INFO - Generated query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
``` (latency: 5.42s, usage: {
  "prompt_tokens": 6863,
  "completion_tokens": 16,
  "total_tokens": 6879,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:17:03,984 - query_optimizer - INFO - Optimized query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:03,985 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:17:03,985 - query_cache - INFO - Cache set for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242 with query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:03,985 - database_query - INFO - Generated and optimized query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:03,995 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:03,996 - database_query - INFO - Executing SQL query: SELECT * 
FROM Production_Product 
LIMIT 5;
2025-03-18 19:17:03,998 - connector - INFO - Closed mysql database connection.
2025-03-18 19:17:07,540 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:17:07,540 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:17:07,540 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:17:07,540 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:17:07,550 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:07,784 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:17:07,785 - connector - INFO - Closed mysql database connection.
2025-03-18 19:17:07,785 - prompt_templates - INFO - Generating MySQL prompt for query: Give me 5 products
2025-03-18 19:17:07,786 - query_cache - INFO - Cache get for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242: None
2025-03-18 19:17:07,786 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Give me 5 products

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:17:10,063 - ai_clients - INFO - Generated query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
``` (latency: 2.27s, usage: {
  "prompt_tokens": 6863,
  "completion_tokens": 16,
  "total_tokens": 6879,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:17:10,063 - query_optimizer - INFO - Optimized query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:10,064 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:17:10,064 - query_cache - INFO - Cache set for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242 with query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:10,064 - database_query - INFO - Generated and optimized query: ```sql
SELECT * 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:10,075 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:10,076 - database_query - INFO - Executing SQL query: SELECT * 
FROM Production_Product 
LIMIT 5;
2025-03-18 19:17:10,078 - connector - INFO - Closed mysql database connection.
2025-03-18 19:17:15,027 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:17:15,028 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:17:15,028 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:17:15,028 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:17:15,038 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:15,164 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:17:15,165 - connector - INFO - Closed mysql database connection.
2025-03-18 19:17:15,166 - prompt_templates - INFO - Generating MySQL prompt for query: Give me 5 products
2025-03-18 19:17:15,167 - query_cache - INFO - Cache get for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242: None
2025-03-18 19:17:15,167 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Give me 5 products

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:17:15,781 - ai_clients - INFO - Generated query: ```sql
SELECT *
FROM Production_Product
LIMIT 5;
``` (latency: 0.61s, usage: {
  "prompt_tokens": 6863,
  "completion_tokens": 15,
  "total_tokens": 6878,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:17:15,781 - query_optimizer - INFO - Optimized query: ```sql
SELECT *
FROM Production_Product
LIMIT 5;
```;
2025-03-18 19:17:15,781 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:17:15,782 - query_cache - INFO - Cache set for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242 with query: ```sql
SELECT *
FROM Production_Product
LIMIT 5;
```;
2025-03-18 19:17:15,782 - database_query - INFO - Generated and optimized query: ```sql
SELECT *
FROM Production_Product
LIMIT 5;
```;
2025-03-18 19:17:15,793 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:15,793 - database_query - INFO - Executing SQL query: SELECT *
FROM Production_Product
LIMIT 5;
2025-03-18 19:17:15,795 - connector - INFO - Closed mysql database connection.
2025-03-18 19:17:18,908 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:17:18,908 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:17:18,909 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:17:18,909 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:17:18,920 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:19,037 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:17:19,037 - connector - INFO - Closed mysql database connection.
2025-03-18 19:17:19,038 - prompt_templates - INFO - Generating MySQL prompt for query: Give me 5 products
2025-03-18 19:17:19,039 - query_cache - INFO - Cache get for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242: None
2025-03-18 19:17:19,039 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Give me 5 products

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:17:20,082 - ai_clients - INFO - Generated query: ```sql
SELECT ProductID, Name, ProductNumber, ListPrice, DiscontinuedDate 
FROM Production_Product 
LIMIT 5;
``` (latency: 1.04s, usage: {
  "prompt_tokens": 6863,
  "completion_tokens": 29,
  "total_tokens": 6892,
  "prompt_tokens_details": {
    "cached_tokens": 6784,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:17:20,082 - query_optimizer - INFO - Optimized query: ```sql
SELECT ProductID, Name, ProductNumber, ListPrice, DiscontinuedDate 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:20,083 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:17:20,083 - query_cache - INFO - Cache set for key 1abd9777f77ec3762d6c44ca12207485d2a0c93b4a15ad3346bd388d62602242 with query: ```sql
SELECT ProductID, Name, ProductNumber, ListPrice, DiscontinuedDate 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:20,083 - database_query - INFO - Generated and optimized query: ```sql
SELECT ProductID, Name, ProductNumber, ListPrice, DiscontinuedDate 
FROM Production_Product 
LIMIT 5;
```;
2025-03-18 19:17:20,094 - connector - INFO - Connected to mysql database.
2025-03-18 19:17:20,094 - database_query - INFO - Executing SQL query: SELECT ProductID, Name, ProductNumber, ListPrice, DiscontinuedDate 
FROM Production_Product 
LIMIT 5;
2025-03-18 19:17:20,096 - connector - INFO - Closed mysql database connection.
2025-03-18 19:33:11,483 - query_cache - INFO - QueryCache initialized with max_size 100
2025-03-18 19:33:11,485 - rate_limiter - INFO - RateLimiter initialized with 5 calls per 60.00 seconds
2025-03-18 19:33:35,462 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:33:35,463 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:33:35,463 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:33:35,566 - connector - INFO - Connected to mysql database.
2025-03-18 19:33:35,652 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:33:35,652 - connector - INFO - Closed mysql database connection.
2025-03-18 19:33:35,652 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:33:35,653 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: None
2025-03-18 19:33:35,653 - ai_clients - INFO - Generating query with prompt: Schema details:
            {'tables': {'dbo_AWBuildVersion': {'columns': ['SystemInformationID', 'Database Version', 'VersionDate', 'ModifiedDate'], 'primary_key': ['SystemInformationID']}, 'dbo_DatabaseLog': {'columns': ['DatabaseLogID', 'PostTime', 'DatabaseUser', 'Event', 'Schema', 'Object', 'TSQL', 'XmlEvent'], 'primary_key': ['DatabaseLogID']}, 'dbo_ErrorLog': {'columns': ['ErrorLogID', 'ErrorTime', 'UserName', 'ErrorNumber', 'ErrorSeverity', 'ErrorState', 'ErrorProcedure', 'ErrorLine', 'ErrorMessage'], 'primary_key': ['ErrorLogID']}, 'HumanResources_Department': {'columns': ['DepartmentID', 'Name', 'GroupName', 'ModifiedDate'], 'primary_key': ['DepartmentID']}, 'HumanResources_Employee': {'columns': ['BusinessEntityID', 'NationalIDNumber', 'LoginID', 'OrganizationNode', 'OrganizationLevel', 'JobTitle', 'BirthDate', 'MaritalStatus', 'Gender', 'HireDate', 'SalariedFlag', 'VacationHours', 'SickLeaveHours', 'CurrentFlag', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'HumanResources_EmployeeDepartmentHistory': {'columns': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate', 'EndDate', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'DepartmentID', 'ShiftID', 'StartDate']}, 'HumanResources_EmployeePayHistory': {'columns': ['BusinessEntityID', 'RateChangeDate', 'Rate', 'PayFrequency', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'RateChangeDate']}, 'HumanResources_JobCandidate': {'columns': ['JobCandidateID', 'BusinessEntityID', 'Resume', 'ModifiedDate'], 'primary_key': ['JobCandidateID']}, 'HumanResources_Shift': {'columns': ['ShiftID', 'Name', 'StartTime', 'EndTime', 'ModifiedDate'], 'primary_key': ['ShiftID']}, 'Person_Address': {'columns': ['AddressID', 'AddressLine1', 'AddressLine2', 'City', 'StateProvinceID', 'PostalCode', 'SpatialLocation', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressID']}, 'Person_AddressType': {'columns': ['AddressTypeID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['AddressTypeID']}, 'Person_BusinessEntity': {'columns': ['BusinessEntityID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_BusinessEntityAddress': {'columns': ['BusinessEntityID', 'AddressID', 'AddressTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'AddressID', 'AddressTypeID']}, 'Person_BusinessEntityContact': {'columns': ['BusinessEntityID', 'PersonID', 'ContactTypeID', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PersonID', 'ContactTypeID']}, 'Person_ContactType': {'columns': ['ContactTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['ContactTypeID']}, 'Person_CountryRegion': {'columns': ['CountryRegionCode', 'Name', 'ModifiedDate'], 'primary_key': ['CountryRegionCode']}, 'Person_EmailAddress': {'columns': ['BusinessEntityID', 'EmailAddressID', 'EmailAddress', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'EmailAddressID']}, 'Person_Password': {'columns': ['BusinessEntityID', 'PasswordHash', 'PasswordSalt', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_Person': {'columns': ['BusinessEntityID', 'PersonType', 'NameStyle', 'Title', 'FirstName', 'MiddleName', 'LastName', 'Suffix', 'EmailPromotion', 'AdditionalContactInfo', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Person_PersonPhone': {'columns': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'PhoneNumber', 'PhoneNumberTypeID']}, 'Person_PhoneNumberType': {'columns': ['PhoneNumberTypeID', 'Name', 'ModifiedDate'], 'primary_key': ['PhoneNumberTypeID']}, 'Person_StateProvince': {'columns': ['StateProvinceID', 'StateProvinceCode', 'CountryRegionCode', 'IsOnlyStateProvinceFlag', 'Name', 'TerritoryID', 'rowguid', 'ModifiedDate'], 'primary_key': ['StateProvinceID']}, 'Production_BillOfMaterials': {'columns': ['BillOfMaterialsID', 'ProductAssemblyID', 'ComponentID', 'StartDate', 'EndDate', 'UnitMeasureCode', 'BOMLevel', 'PerAssemblyQty', 'ModifiedDate'], 'primary_key': ['BillOfMaterialsID']}, 'Production_Culture': {'columns': ['CultureID', 'Name', 'ModifiedDate'], 'primary_key': ['CultureID']}, 'Production_Document': {'columns': ['DocumentNode', 'DocumentLevel', 'Title', 'Owner', 'FolderFlag', 'FileName', 'FileExtension', 'Revision', 'ChangeNumber', 'Status', 'DocumentSummary', 'Document', 'rowguid', 'ModifiedDate'], 'primary_key': ['DocumentNode']}, 'Production_Illustration': {'columns': ['IllustrationID', 'Diagram', 'ModifiedDate'], 'primary_key': ['IllustrationID']}, 'Production_Location': {'columns': ['LocationID', 'Name', 'CostRate', 'Availability', 'ModifiedDate'], 'primary_key': ['LocationID']}, 'Production_Product': {'columns': ['ProductID', 'Name', 'ProductNumber', 'MakeFlag', 'FinishedGoodsFlag', 'Color', 'SafetyStockLevel', 'ReorderPoint', 'StandardCost', 'ListPrice', 'Size', 'SizeUnitMeasureCode', 'WeightUnitMeasureCode', 'Weight', 'DaysToManufacture', 'ProductLine', 'Class', 'Style', 'ProductSubcategoryID', 'ProductModelID', 'SellStartDate', 'SellEndDate', 'DiscontinuedDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID']}, 'Production_ProductCategory': {'columns': ['ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductCategoryID']}, 'Production_ProductCostHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'StandardCost', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductDescription': {'columns': ['ProductDescriptionID', 'Description', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductDescriptionID']}, 'Production_ProductDocument': {'columns': ['ProductID', 'DocumentNode', 'ModifiedDate'], 'primary_key': ['ProductID', 'DocumentNode']}, 'Production_ProductInventory': {'columns': ['ProductID', 'LocationID', 'Shelf', 'Bin', 'Quantity', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductID', 'LocationID']}, 'Production_ProductListPriceHistory': {'columns': ['ProductID', 'StartDate', 'EndDate', 'ListPrice', 'ModifiedDate'], 'primary_key': ['ProductID', 'StartDate']}, 'Production_ProductModel': {'columns': ['ProductModelID', 'Name', 'CatalogDescription', 'Instructions', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductModelID']}, 'Production_ProductModelIllustration': {'columns': ['ProductModelID', 'IllustrationID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'IllustrationID']}, 'Production_ProductModelProductDescriptionCulture': {'columns': ['ProductModelID', 'ProductDescriptionID', 'CultureID', 'ModifiedDate'], 'primary_key': ['ProductModelID', 'ProductDescriptionID', 'CultureID']}, 'Production_ProductPhoto': {'columns': ['ProductPhotoID', 'ThumbNailPhoto', 'ThumbnailPhotoFileName', 'LargePhoto', 'LargePhotoFileName', 'ModifiedDate'], 'primary_key': ['ProductPhotoID']}, 'Production_ProductProductPhoto': {'columns': ['ProductID', 'ProductPhotoID', 'Primary', 'ModifiedDate'], 'primary_key': ['ProductID', 'ProductPhotoID']}, 'Production_ProductReview': {'columns': ['ProductReviewID', 'ProductID', 'ReviewerName', 'ReviewDate', 'EmailAddress', 'Rating', 'Comments', 'ModifiedDate'], 'primary_key': ['ProductReviewID']}, 'Production_ProductSubcategory': {'columns': ['ProductSubcategoryID', 'ProductCategoryID', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['ProductSubcategoryID']}, 'Production_ScrapReason': {'columns': ['ScrapReasonID', 'Name', 'ModifiedDate'], 'primary_key': ['ScrapReasonID']}, 'Production_TransactionHistory': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_TransactionHistoryArchive': {'columns': ['TransactionID', 'ProductID', 'ReferenceOrderID', 'ReferenceOrderLineID', 'TransactionDate', 'TransactionType', 'Quantity', 'ActualCost', 'ModifiedDate'], 'primary_key': ['TransactionID']}, 'Production_UnitMeasure': {'columns': ['UnitMeasureCode', 'Name', 'ModifiedDate'], 'primary_key': ['UnitMeasureCode']}, 'Production_WorkOrder': {'columns': ['WorkOrderID', 'ProductID', 'OrderQty', 'StockedQty', 'ScrappedQty', 'StartDate', 'EndDate', 'DueDate', 'ScrapReasonID', 'ModifiedDate'], 'primary_key': ['WorkOrderID']}, 'Production_WorkOrderRouting': {'columns': ['WorkOrderID', 'ProductID', 'OperationSequence', 'LocationID', 'ScheduledStartDate', 'ScheduledEndDate', 'ActualStartDate', 'ActualEndDate', 'ActualResourceHrs', 'PlannedCost', 'ActualCost', 'ModifiedDate'], 'primary_key': ['WorkOrderID', 'ProductID', 'OperationSequence']}, 'Purchasing_ProductVendor': {'columns': ['ProductID', 'BusinessEntityID', 'AverageLeadTime', 'StandardPrice', 'LastReceiptCost', 'LastReceiptDate', 'MinOrderQty', 'MaxOrderQty', 'OnOrderQty', 'UnitMeasureCode', 'ModifiedDate'], 'primary_key': ['ProductID', 'BusinessEntityID']}, 'Purchasing_PurchaseOrderDetail': {'columns': ['PurchaseOrderID', 'PurchaseOrderDetailID', 'DueDate', 'OrderQty', 'ProductID', 'UnitPrice', 'LineTotal', 'ReceivedQty', 'RejectedQty', 'StockedQty', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID', 'PurchaseOrderDetailID']}, 'Purchasing_PurchaseOrderHeader': {'columns': ['PurchaseOrderID', 'RevisionNumber', 'Status', 'EmployeeID', 'VendorID', 'ShipMethodID', 'OrderDate', 'ShipDate', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'ModifiedDate'], 'primary_key': ['PurchaseOrderID']}, 'Purchasing_ShipMethod': {'columns': ['ShipMethodID', 'Name', 'ShipBase', 'ShipRate', 'rowguid', 'ModifiedDate'], 'primary_key': ['ShipMethodID']}, 'Purchasing_Vendor': {'columns': ['BusinessEntityID', 'AccountNumber', 'Name', 'CreditRating', 'PreferredVendorStatus', 'ActiveFlag', 'PurchasingWebServiceURL', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_CountryRegionCurrency': {'columns': ['CountryRegionCode', 'CurrencyCode', 'ModifiedDate'], 'primary_key': ['CountryRegionCode', 'CurrencyCode']}, 'Sales_CreditCard': {'columns': ['CreditCardID', 'CardType', 'CardNumber', 'ExpMonth', 'ExpYear', 'ModifiedDate'], 'primary_key': ['CreditCardID']}, 'Sales_Currency': {'columns': ['CurrencyCode', 'Name', 'ModifiedDate'], 'primary_key': ['CurrencyCode']}, 'Sales_CurrencyRate': {'columns': ['CurrencyRateID', 'CurrencyRateDate', 'FromCurrencyCode', 'ToCurrencyCode', 'AverageRate', 'EndOfDayRate', 'ModifiedDate'], 'primary_key': ['CurrencyRateID']}, 'Sales_Customer': {'columns': ['CustomerID', 'PersonID', 'StoreID', 'TerritoryID', 'AccountNumber', 'rowguid', 'ModifiedDate'], 'primary_key': ['CustomerID']}, 'Sales_PersonCreditCard': {'columns': ['BusinessEntityID', 'CreditCardID', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'CreditCardID']}, 'Sales_SalesOrderDetail': {'columns': ['SalesOrderID', 'SalesOrderDetailID', 'CarrierTrackingNumber', 'OrderQty', 'ProductID', 'SpecialOfferID', 'UnitPrice', 'UnitPriceDiscount', 'LineTotal', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesOrderDetailID']}, 'Sales_SalesOrderHeader': {'columns': ['SalesOrderID', 'RevisionNumber', 'OrderDate', 'DueDate', 'ShipDate', 'Status', 'OnlineOrderFlag', 'SalesOrderNumber', 'PurchaseOrderNumber', 'AccountNumber', 'CustomerID', 'SalesPersonID', 'TerritoryID', 'BillToAddressID', 'ShipToAddressID', 'ShipMethodID', 'CreditCardID', 'CreditCardApprovalCode', 'CurrencyRateID', 'SubTotal', 'TaxAmt', 'Freight', 'TotalDue', 'Comment', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesOrderID']}, 'Sales_SalesOrderHeaderSalesReason': {'columns': ['SalesOrderID', 'SalesReasonID', 'ModifiedDate'], 'primary_key': ['SalesOrderID', 'SalesReasonID']}, 'Sales_SalesPerson': {'columns': ['BusinessEntityID', 'TerritoryID', 'SalesQuota', 'Bonus', 'CommissionPct', 'SalesYTD', 'SalesLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}, 'Sales_SalesPersonQuotaHistory': {'columns': ['BusinessEntityID', 'QuotaDate', 'SalesQuota', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'QuotaDate']}, 'Sales_SalesReason': {'columns': ['SalesReasonID', 'Name', 'ReasonType', 'ModifiedDate'], 'primary_key': ['SalesReasonID']}, 'Sales_SalesTaxRate': {'columns': ['SalesTaxRateID', 'StateProvinceID', 'TaxType', 'TaxRate', 'Name', 'rowguid', 'ModifiedDate'], 'primary_key': ['SalesTaxRateID']}, 'Sales_SalesTerritory': {'columns': ['TerritoryID', 'Name', 'CountryRegionCode', 'Group', 'SalesYTD', 'SalesLastYear', 'CostYTD', 'CostLastYear', 'rowguid', 'ModifiedDate'], 'primary_key': ['TerritoryID']}, 'Sales_SalesTerritoryHistory': {'columns': ['BusinessEntityID', 'TerritoryID', 'StartDate', 'EndDate', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID', 'TerritoryID', 'StartDate']}, 'Sales_ShoppingCartItem': {'columns': ['ShoppingCartItemID', 'ShoppingCartID', 'Quantity', 'ProductID', 'DateCreated', 'ModifiedDate'], 'primary_key': ['ShoppingCartItemID']}, 'Sales_SpecialOffer': {'columns': ['SpecialOfferID', 'Description', 'DiscountPct', 'Type', 'Category', 'StartDate', 'EndDate', 'MinQty', 'MaxQty', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID']}, 'Sales_SpecialOfferProduct': {'columns': ['SpecialOfferID', 'ProductID', 'rowguid', 'ModifiedDate'], 'primary_key': ['SpecialOfferID', 'ProductID']}, 'Sales_Store': {'columns': ['BusinessEntityID', 'Name', 'SalesPersonID', 'Demographics', 'rowguid', 'ModifiedDate'], 'primary_key': ['BusinessEntityID']}}, 'relationships': {'HumanResources_Employee': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'HumanResources_EmployeeDepartmentHistory': [{'column': 'DepartmentID', 'references': {'table': 'HumanResources_Department', 'column': 'DepartmentID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShiftID', 'references': {'table': 'HumanResources_Shift', 'column': 'ShiftID'}}], 'HumanResources_EmployeePayHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'HumanResources_JobCandidate': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Person_Address': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Person_BusinessEntityAddress': [{'column': 'AddressTypeID', 'references': {'table': 'Person_AddressType', 'column': 'AddressTypeID'}}, {'column': 'AddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_BusinessEntityContact': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'ContactTypeID', 'references': {'table': 'Person_ContactType', 'column': 'ContactTypeID'}}, {'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_EmailAddress': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Password': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Person_Person': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Person_PersonPhone': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'PhoneNumberTypeID', 'references': {'table': 'Person_PhoneNumberType', 'column': 'PhoneNumberTypeID'}}], 'Person_StateProvince': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Production_BillOfMaterials': [{'column': 'ComponentID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ProductAssemblyID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_Document': [{'column': 'Owner', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}], 'Production_Product': [{'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}, {'column': 'ProductSubcategoryID', 'references': {'table': 'Production_ProductSubcategory', 'column': 'ProductSubcategoryID'}}, {'column': 'SizeUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'WeightUnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}], 'Production_ProductCostHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductDocument': [{'column': 'DocumentNode', 'references': {'table': 'Production_Document', 'column': 'DocumentNode'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductInventory': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductListPriceHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductModelIllustration': [{'column': 'IllustrationID', 'references': {'table': 'Production_Illustration', 'column': 'IllustrationID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductModelProductDescriptionCulture': [{'column': 'CultureID', 'references': {'table': 'Production_Culture', 'column': 'CultureID'}}, {'column': 'ProductDescriptionID', 'references': {'table': 'Production_ProductDescription', 'column': 'ProductDescriptionID'}}, {'column': 'ProductModelID', 'references': {'table': 'Production_ProductModel', 'column': 'ProductModelID'}}], 'Production_ProductProductPhoto': [{'column': 'ProductPhotoID', 'references': {'table': 'Production_ProductPhoto', 'column': 'ProductPhotoID'}}, {'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductReview': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_ProductSubcategory': [{'column': 'ProductCategoryID', 'references': {'table': 'Production_ProductCategory', 'column': 'ProductCategoryID'}}], 'Production_TransactionHistory': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Production_WorkOrder': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'ScrapReasonID', 'references': {'table': 'Production_ScrapReason', 'column': 'ScrapReasonID'}}], 'Production_WorkOrderRouting': [{'column': 'LocationID', 'references': {'table': 'Production_Location', 'column': 'LocationID'}}, {'column': 'WorkOrderID', 'references': {'table': 'Production_WorkOrder', 'column': 'WorkOrderID'}}], 'Purchasing_ProductVendor': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'UnitMeasureCode', 'references': {'table': 'Production_UnitMeasure', 'column': 'UnitMeasureCode'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_PurchaseOrderDetail': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'PurchaseOrderID', 'references': {'table': 'Purchasing_PurchaseOrderHeader', 'column': 'PurchaseOrderID'}}], 'Purchasing_PurchaseOrderHeader': [{'column': 'EmployeeID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}, {'column': 'VendorID', 'references': {'table': 'Purchasing_Vendor', 'column': 'BusinessEntityID'}}], 'Purchasing_Vendor': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}], 'Sales_CountryRegionCurrency': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}, {'column': 'CurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_CurrencyRate': [{'column': 'FromCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}, {'column': 'ToCurrencyCode', 'references': {'table': 'Sales_Currency', 'column': 'CurrencyCode'}}], 'Sales_Customer': [{'column': 'PersonID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'StoreID', 'references': {'table': 'Sales_Store', 'column': 'BusinessEntityID'}}], 'Sales_PersonCreditCard': [{'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'BusinessEntityID', 'references': {'table': 'Person_Person', 'column': 'BusinessEntityID'}}], 'Sales_SalesOrderDetail': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'SpecialOfferID'}}, {'column': 'ProductID', 'references': {'table': 'Sales_SpecialOfferProduct', 'column': 'ProductID'}}], 'Sales_SalesOrderHeader': [{'column': 'BillToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'ShipToAddressID', 'references': {'table': 'Person_Address', 'column': 'AddressID'}}, {'column': 'CreditCardID', 'references': {'table': 'Sales_CreditCard', 'column': 'CreditCardID'}}, {'column': 'CurrencyRateID', 'references': {'table': 'Sales_CurrencyRate', 'column': 'CurrencyRateID'}}, {'column': 'CustomerID', 'references': {'table': 'Sales_Customer', 'column': 'CustomerID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}, {'column': 'ShipMethodID', 'references': {'table': 'Purchasing_ShipMethod', 'column': 'ShipMethodID'}}], 'Sales_SalesOrderHeaderSalesReason': [{'column': 'SalesOrderID', 'references': {'table': 'Sales_SalesOrderHeader', 'column': 'SalesOrderID'}}, {'column': 'SalesReasonID', 'references': {'table': 'Sales_SalesReason', 'column': 'SalesReasonID'}}], 'Sales_SalesPerson': [{'column': 'BusinessEntityID', 'references': {'table': 'HumanResources_Employee', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_SalesPersonQuotaHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}], 'Sales_SalesTaxRate': [{'column': 'StateProvinceID', 'references': {'table': 'Person_StateProvince', 'column': 'StateProvinceID'}}], 'Sales_SalesTerritory': [{'column': 'CountryRegionCode', 'references': {'table': 'Person_CountryRegion', 'column': 'CountryRegionCode'}}], 'Sales_SalesTerritoryHistory': [{'column': 'BusinessEntityID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}, {'column': 'TerritoryID', 'references': {'table': 'Sales_SalesTerritory', 'column': 'TerritoryID'}}], 'Sales_ShoppingCartItem': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}], 'Sales_SpecialOfferProduct': [{'column': 'ProductID', 'references': {'table': 'Production_Product', 'column': 'ProductID'}}, {'column': 'SpecialOfferID', 'references': {'table': 'Sales_SpecialOffer', 'column': 'SpecialOfferID'}}], 'Sales_Store': [{'column': 'BusinessEntityID', 'references': {'table': 'Person_BusinessEntity', 'column': 'BusinessEntityID'}}, {'column': 'SalesPersonID', 'references': {'table': 'Sales_SalesPerson', 'column': 'BusinessEntityID'}}]}}

            Generate and return the MySQL query for the following request:
            Count of employee birthdays in the month of jan

            Ensure the query follows best practices, uses proper indexing, and avoids SQL injection.Only return the query with no description.
2025-03-18 19:33:37,358 - ai_clients - INFO - Generated query: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
``` (latency: 1.70s, usage: {
  "prompt_tokens": 6867,
  "completion_tokens": 30,
  "total_tokens": 6897,
  "prompt_tokens_details": {
    "cached_tokens": 0,
    "audio_tokens": 0
  },
  "completion_tokens_details": {
    "reasoning_tokens": 0,
    "audio_tokens": 0,
    "accepted_prediction_tokens": 0,
    "rejected_prediction_tokens": 0
  }
})
2025-03-18 19:33:37,359 - query_optimizer - INFO - Optimized query: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:33:37,359 - query_optimizer - INFO - Query validation passed.
2025-03-18 19:33:37,359 - query_cache - INFO - Cache set for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c with query: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:33:37,359 - database_query - INFO - Generated and optimized query: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:33:37,368 - connector - INFO - Connected to mysql database.
2025-03-18 19:33:37,368 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:33:37,374 - connector - INFO - Closed mysql database connection.
2025-03-18 19:33:58,207 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:33:58,209 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:33:58,210 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:33:58,223 - connector - INFO - Connected to mysql database.
2025-03-18 19:33:58,319 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:33:58,319 - connector - INFO - Closed mysql database connection.
2025-03-18 19:33:58,320 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:33:58,321 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:33:58,321 - database_query - INFO - Returning cached query.
2025-03-18 19:33:58,321 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:33:58,328 - connector - INFO - Connected to mysql database.
2025-03-18 19:33:58,328 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:33:58,329 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:12,057 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:12,058 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:12,059 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:12,071 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:12,182 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:12,183 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:12,184 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:12,185 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:12,185 - database_query - INFO - Returning cached query.
2025-03-18 19:34:12,185 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:12,192 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:12,193 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:12,194 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:12,917 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:12,918 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:12,918 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:12,931 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:13,054 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:13,055 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:13,055 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:13,056 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:13,056 - database_query - INFO - Returning cached query.
2025-03-18 19:34:13,057 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:13,063 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:13,063 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:13,064 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:13,682 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:13,683 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:13,683 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:13,694 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:13,807 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:13,807 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:13,808 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:13,808 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:13,809 - database_query - INFO - Returning cached query.
2025-03-18 19:34:13,809 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:13,815 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:13,815 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:13,818 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:14,332 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:14,332 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:14,333 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:14,343 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:14,432 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:14,432 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:14,433 - rate_limiter - WARNING - Rate limit reached. Sleeping for 21.22 seconds.
2025-03-18 19:34:15,402 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:15,402 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:15,403 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:15,410 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:15,544 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:15,545 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:15,546 - rate_limiter - WARNING - Rate limit reached. Sleeping for 20.11 seconds.
2025-03-18 19:34:15,616 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:15,617 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:15,617 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:15,629 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:15,791 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:15,792 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:15,793 - rate_limiter - WARNING - Rate limit reached. Sleeping for 19.86 seconds.
2025-03-18 19:34:15,798 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:15,798 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:15,798 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:15,806 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:15,912 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:15,912 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:15,912 - rate_limiter - WARNING - Rate limit reached. Sleeping for 19.74 seconds.
2025-03-18 19:34:15,929 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:15,929 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:15,929 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:15,937 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:16,046 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:16,047 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:16,047 - rate_limiter - WARNING - Rate limit reached. Sleeping for 19.61 seconds.
2025-03-18 19:34:16,099 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:16,099 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:16,099 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:16,112 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:16,347 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:16,348 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:16,348 - rate_limiter - WARNING - Rate limit reached. Sleeping for 19.30 seconds.
2025-03-18 19:34:35,654 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:35,655 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:35,655 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:35,656 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,657 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,657 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:35,657 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:35,658 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,658 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:35,658 - database_query - INFO - Returning cached query.
2025-03-18 19:34:35,658 - database_query - INFO - Returning cached query.
2025-03-18 19:34:35,659 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,660 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,660 - database_query - INFO - Returning cached query.
2025-03-18 19:34:35,660 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,660 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,661 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,661 - database_query - INFO - Returning cached query.
2025-03-18 19:34:35,663 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,661 - database_query - INFO - Returning cached query.
2025-03-18 19:34:35,664 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,661 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,661 - database_query - INFO - Returning cached query.
2025-03-18 19:34:35,665 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:35,681 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:35,681 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:35,681 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:35,681 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:35,682 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:35,682 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:35,682 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:35,682 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:35,682 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:35,682 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:35,682 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:35,683 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:35,685 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:35,685 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:35,692 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:35,693 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:35,739 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:35,739 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:53,429 - ai_clients - INFO - OpenAI API Key loaded: sk-pr...
2025-03-18 19:34:53,430 - rate_limiter - INFO - RateLimiter initialized with 30 calls per 60.00 seconds
2025-03-18 19:34:53,431 - query_optimizer - INFO - QueryOptimizer initialized with prohibited patterns: ['DROP', 'DELETE', 'TRUNCATE', 'GRANT', 'REVOKE', 'ALTER']
2025-03-18 19:34:53,440 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:53,526 - SchemaGenerator - INFO - Schema and relationships fetched successfully.
2025-03-18 19:34:53,527 - connector - INFO - Closed mysql database connection.
2025-03-18 19:34:53,527 - rate_limiter - WARNING - Rate limit reached. Sleeping for 4.79 seconds.
2025-03-18 19:34:58,320 - prompt_templates - INFO - Generating MySQL prompt for query: Count of employee birthdays in the month of jan
2025-03-18 19:34:58,322 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:58,322 - database_query - INFO - Returning cached query.
2025-03-18 19:34:58,322 - query_cache - INFO - Cache get for key 8424e83a1f987c2240060ca395926c04d18ff489da4554d3d3a2d41823f1190c: ```sql
SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
```;
2025-03-18 19:34:58,333 - connector - INFO - Connected to mysql database.
2025-03-18 19:34:58,333 - database_query - INFO - Executing SQL query: SELECT COUNT(*) AS BirthdaysInJanuary
FROM HumanResources_Employee
WHERE MONTH(BirthDate) = 1;
2025-03-18 19:34:58,336 - connector - INFO - Closed mysql database connection.
